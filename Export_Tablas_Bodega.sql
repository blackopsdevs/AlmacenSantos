/**
Creacion de la BD con el usuario maestro, ROOT
**/


-- CREATE DATABASE almacenbd;

-- USE almacenbd;

-- CREATE USER 'almacenbd'@'localhost' IDENTIFIED BY 'almacenbd12345';

-- GRANT ALL PRIVILEGES ON almacenbd.* TO 'almacenbd'@'localhost' WITH GRANT OPTION;

-- FLUSH PRIVILEGES;

/**
Se crea el usuario para la aplicacion web.
**/

-- CREATE USER 'useramlacen'@'localhost' IDENTIFIED BY 'useramlacen123';

-- GRANT DELETE,INSERT,SELECT,UPDATE ON almacenbd.* TO 'useramlacen'@'localhost' ;

-- FLUSH PRIVILEGES;

-- MySQL Script generated by MySQL Workbench
-- Sat Oct  8 01:47:10 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema almacenbd
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `almacenbd` ;

-- -----------------------------------------------------
-- Schema almacenbd
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `almacenbd` DEFAULT CHARACTER SET utf8 ;
USE `almacenbd` ;

-- -----------------------------------------------------
-- Table `almacenbd`.`PROVEEDOR`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`PROVEEDOR` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`PROVEEDOR` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `CLAVE` VARCHAR(45) NOT NULL,
  `PROVEEDOR` VARCHAR(200) NOT NULL,
  `DIRECCION` VARCHAR(45) NOT NULL,
  `CELULAR` VARCHAR(45) NULL,
  `TEL_OFICINA` VARCHAR(45) NOT NULL,
  `EMAIL` VARCHAR(45) NOT NULL,
  `RFC` VARCHAR(45) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`ALMACEN`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`ALMACEN` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`ALMACEN` (
  `ID` INT(11) NOT NULL,
  `PROVEEDOR_ID` INT(11) NOT NULL,
  `NO_TICKET` BIGINT(20) NOT NULL,
  `FECHA_TICKET` VARCHAR(45) NOT NULL,
  `HORA_TICKET` VARCHAR(45) NOT NULL,
  `CAJA` VARCHAR(45) NOT NULL,
  `CAJERO` VARCHAR(45) NOT NULL,
  `CANTIDAD_PRODUCTO` DECIMAL(10,2) NOT NULL,
  `COSTO_TOTAL` DECIMAL(10,2) NOT NULL,
  `PESO_TOTAL` DECIMAL(10,2) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_ALMACEN_PROVEEDORES1_idx` (`PROVEEDOR_ID` ASC),
  CONSTRAINT `fk_ALMACEN_PROVEEDORES1`
    FOREIGN KEY (`PROVEEDOR_ID`)
    REFERENCES `almacenbd`.`PROVEEDOR` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`CAT_PRESENTACION`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`CAT_PRESENTACION` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`CAT_PRESENTACION` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `PRESENTACION` VARCHAR(45) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`CAT_ANIMAL`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`CAT_ANIMAL` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`CAT_ANIMAL` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `ANIMAL` VARCHAR(45) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`CAT_MARCA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`CAT_MARCA` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`CAT_MARCA` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `MARCA` VARCHAR(45) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`PRODUCTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`PRODUCTO` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`PRODUCTO` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `PRODUCTO` VARCHAR(45) NOT NULL,
  `CAT_PRESENTACION_ID` INT NOT NULL,
  `CAT_ANIMAL_ID` INT(11) NOT NULL,
  `MARCA_ID` INT(11) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_PRODUCTO_CAT_PRESENTACION1_idx` (`CAT_PRESENTACION_ID` ASC),
  INDEX `fk_PRODUCTO_CAT_ANIMAL1_idx` (`CAT_ANIMAL_ID` ASC),
  INDEX `fk_PRODUCTO_MARCA1_idx` (`MARCA_ID` ASC),
  CONSTRAINT `fk_PRODUCTO_CAT_PRESENTACION1`
    FOREIGN KEY (`CAT_PRESENTACION_ID`)
    REFERENCES `almacenbd`.`CAT_PRESENTACION` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PRODUCTO_CAT_ANIMAL1`
    FOREIGN KEY (`CAT_ANIMAL_ID`)
    REFERENCES `almacenbd`.`CAT_ANIMAL` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PRODUCTO_MARCA1`
    FOREIGN KEY (`MARCA_ID`)
    REFERENCES `almacenbd`.`CAT_MARCA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`PRODUCTO_DETALLE_STOCK`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`PRODUCTO_DETALLE_STOCK` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`PRODUCTO_DETALLE_STOCK` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `DETALLE` VARCHAR(45) NOT NULL,
  `PRODUCTO_ID` INT(11) NOT NULL,
  `ALMACEN_ID` INT(11) NOT NULL,
  `PRECIO_UNITARIO` DECIMAL(10,2) NOT NULL,
  `STOCK` DECIMAL(10,2) NOT NULL,
  `STOCK_TOTAL` DECIMAL(10,2) NULL,
  `PRECIO_PUBLICO` DECIMAL(10,2) NOT NULL,
  `PRECIO_KILO` DECIMAL(10,2) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_PRODUCTO_DETALLE_PRODUCTO1_idx` (`PRODUCTO_ID` ASC),
  INDEX `fk_PRODUCTO_DETALLE_ALMACEN1_idx` (`ALMACEN_ID` ASC),
  CONSTRAINT `fk_PRODUCTO_DETALLE_PRODUCTO1`
    FOREIGN KEY (`PRODUCTO_ID`)
    REFERENCES `almacenbd`.`PRODUCTO` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PRODUCTO_DETALLE_ALMACEN1`
    FOREIGN KEY (`ALMACEN_ID`)
    REFERENCES `almacenbd`.`ALMACEN` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`CAT_ROL`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`CAT_ROL` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`CAT_ROL` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `ROL` VARCHAR(45) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`PERSONA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`PERSONA` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`PERSONA` (
  `ID` INT(11) NOT NULL,
  `NOMBRE` VARCHAR(100) NOT NULL,
  `APE_PATERNO` VARCHAR(45) NOT NULL,
  `APE_MATERNO` VARCHAR(45) NOT NULL,
  `DIRECCION` VARCHAR(45) NOT NULL,
  `CELULAR` VARCHAR(45) NOT NULL,
  `TEL_CASA` VARCHAR(45) NULL,
  `CURP` VARCHAR(45) NOT NULL,
  `RFC` VARCHAR(45) NULL,
  `EMAIL` VARCHAR(100) NULL,
  `CAT_ROL_ID` INT(11) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_PERSONA_CAT_ROL1_idx` (`CAT_ROL_ID` ASC),
  CONSTRAINT `fk_PERSONA_CAT_ROL1`
    FOREIGN KEY (`CAT_ROL_ID`)
    REFERENCES `almacenbd`.`CAT_ROL` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`CLIENTE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`CLIENTE` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`CLIENTE` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `TOTAL_COMPRA` VARCHAR(45) NOT NULL,
  `PERSONA_ID` INT(11) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_CLIENTE_PERSONA1_idx` (`PERSONA_ID` ASC),
  CONSTRAINT `fk_CLIENTE_PERSONA1`
    FOREIGN KEY (`PERSONA_ID`)
    REFERENCES `almacenbd`.`PERSONA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`USUARIO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`USUARIO` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`USUARIO` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `PERSONA_ID` INT(11) NOT NULL,
  `USERNAME` VARCHAR(45) NOT NULL,
  `PASSWORD` VARCHAR(45) NOT NULL,
  `MASTER` INT(2) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_USUARIO_PERSONA_idx` (`PERSONA_ID` ASC),
  UNIQUE INDEX `PERSONA_ID_UNIQUE` (`PERSONA_ID` ASC),
  CONSTRAINT `fk_USUARIO_PERSONA`
    FOREIGN KEY (`PERSONA_ID`)
    REFERENCES `almacenbd`.`PERSONA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`CAT_TIPO_CLIENTE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`CAT_TIPO_CLIENTE` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`CAT_TIPO_CLIENTE` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `TIPO_CLIENTE` VARCHAR(45) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`CAT_CAJA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`CAT_CAJA` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`CAT_CAJA` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `CAJA` VARCHAR(45) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`CAT_SUCURSAL`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`CAT_SUCURSAL` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`CAT_SUCURSAL` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `SUCURSAL` VARCHAR(45) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`CAT_FORMA_PAGO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`CAT_FORMA_PAGO` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`CAT_FORMA_PAGO` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `FORMA_PAGO` VARCHAR(45) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`CAT_TIPO_DOCS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`CAT_TIPO_DOCS` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`CAT_TIPO_DOCS` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `TIPO_DOCS` VARCHAR(45) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`CAT_IVA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`CAT_IVA` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`CAT_IVA` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `IVA` VARCHAR(45) NOT NULL,
  `STATUS_FLAG` INT(1) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`VENTA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`VENTA` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`VENTA` (
  `ID` INT(11) NOT NULL,
  `NO_TICKET` INT(11) NOT NULL,
  `VENTA_TOTAL` DECIMAL(10,2) NOT NULL,
  `PAGO_EFECTIVO` DECIMAL(10,2) NULL,
  `CAMBIO_EFECTIVO` DECIMAL(10,2) NULL,
  `CLIENTE_ID` INT(11) NOT NULL,
  `CAT_TIPO_CLIENTE_ID` INT(11) NOT NULL,
  `CAT_CAJAS_ID` INT(11) NOT NULL,
  `CAT_SUCURSAL_ID` INT(11) NOT NULL,
  `CAT_FORMA_PAGO_ID` INT(11) NOT NULL,
  `CAT_TIPO_DOCS_ID` INT(11) NOT NULL,
  `CAT_IVA_ID` INT(11) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_VENTA_CLIENTE1_idx` (`CLIENTE_ID` ASC),
  INDEX `fk_VENTA_CAT_TIPO_CLIENTE1_idx` (`CAT_TIPO_CLIENTE_ID` ASC),
  INDEX `fk_VENTA_CAT_CAJAS1_idx` (`CAT_CAJAS_ID` ASC),
  INDEX `fk_VENTA_CAT_SUCURSAL1_idx` (`CAT_SUCURSAL_ID` ASC),
  INDEX `fk_VENTA_CAT_FORMA_PAGO1_idx` (`CAT_FORMA_PAGO_ID` ASC),
  INDEX `fk_VENTA_CAT_TIPO_DOCS1_idx` (`CAT_TIPO_DOCS_ID` ASC),
  INDEX `fk_VENTA_CAT_IVA1_idx` (`CAT_IVA_ID` ASC),
  CONSTRAINT `fk_VENTA_CLIENTE1`
    FOREIGN KEY (`CLIENTE_ID`)
    REFERENCES `almacenbd`.`CLIENTE` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_VENTA_CAT_TIPO_CLIENTE1`
    FOREIGN KEY (`CAT_TIPO_CLIENTE_ID`)
    REFERENCES `almacenbd`.`CAT_TIPO_CLIENTE` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_VENTA_CAT_CAJAS1`
    FOREIGN KEY (`CAT_CAJAS_ID`)
    REFERENCES `almacenbd`.`CAT_CAJA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_VENTA_CAT_SUCURSAL1`
    FOREIGN KEY (`CAT_SUCURSAL_ID`)
    REFERENCES `almacenbd`.`CAT_SUCURSAL` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_VENTA_CAT_FORMA_PAGO1`
    FOREIGN KEY (`CAT_FORMA_PAGO_ID`)
    REFERENCES `almacenbd`.`CAT_FORMA_PAGO` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_VENTA_CAT_TIPO_DOCS1`
    FOREIGN KEY (`CAT_TIPO_DOCS_ID`)
    REFERENCES `almacenbd`.`CAT_TIPO_DOCS` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_VENTA_CAT_IVA1`
    FOREIGN KEY (`CAT_IVA_ID`)
    REFERENCES `almacenbd`.`CAT_IVA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`CAT_TIPO_SUB_VENTA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`CAT_TIPO_SUB_VENTA` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`CAT_TIPO_SUB_VENTA` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `TIPO_SUB_VENTAcol` VARCHAR(45) NOT NULL,
  `VARIABLE` VARCHAR(45) NOT NULL,
  `VALOR` VARCHAR(45) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_DATE` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`VENTA_DETALLE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`VENTA_DETALLE` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`VENTA_DETALLE` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `VENTA_ID` INT(11) NOT NULL,
  `PRODUCTO_DETALLE_STOCK_ID` INT(11) NOT NULL,
  `CAT_TIPO_SUB_VENTA_ID` INT(11) NOT NULL,
  `CANTIDAD` DECIMAL(10,2) NOT NULL,
  `PRECIO_UNITARIO` DECIMAL(10,2) NOT NULL,
  `PRECIO_TOTAL` DECIMAL(10,2) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE:USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_VENTA_DETALLE_VENTA1_idx` (`VENTA_ID` ASC),
  INDEX `fk_VENTA_DETALLE_PRODUCTO_DETALLE_STOCK1_idx` (`PRODUCTO_DETALLE_STOCK_ID` ASC),
  INDEX `fk_VENTA_DETALLE_CAT_TIPO_SUB_VENTA1_idx` (`CAT_TIPO_SUB_VENTA_ID` ASC),
  CONSTRAINT `fk_VENTA_DETALLE_VENTA1`
    FOREIGN KEY (`VENTA_ID`)
    REFERENCES `almacenbd`.`VENTA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_VENTA_DETALLE_PRODUCTO_DETALLE_STOCK1`
    FOREIGN KEY (`PRODUCTO_DETALLE_STOCK_ID`)
    REFERENCES `almacenbd`.`PRODUCTO_DETALLE_STOCK` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_VENTA_DETALLE_CAT_TIPO_SUB_VENTA1`
    FOREIGN KEY (`CAT_TIPO_SUB_VENTA_ID`)
    REFERENCES `almacenbd`.`CAT_TIPO_SUB_VENTA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`ALMACEN_DETALLE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`ALMACEN_DETALLE` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`ALMACEN_DETALLE` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `ALMACEN_ID` INT(11) NOT NULL,
  `PRODUCTO_ID` INT(11) NOT NULL,
  `PRECIO_UNITARIO` DECIMAL(10,2) NOT NULL,
  `CANTIDAD` DECIMAL(10,2) NOT NULL,
  `PRECIO_TOTAL` DECIMAL(10,2) NOT NULL,
  `PRECIO_PUBLICO` DECIMAL(10,2) NOT NULL,
  `PRECIO_KILO` VARCHAR(45) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_ALMACEN_DETALLE_ALMACEN1_idx` (`ALMACEN_ID` ASC),
  INDEX `fk_ALMACEN_DETALLE_PRODUCTO1_idx` (`PRODUCTO_ID` ASC),
  CONSTRAINT `fk_ALMACEN_DETALLE_ALMACEN10`
    FOREIGN KEY (`ALMACEN_ID`)
    REFERENCES `almacenbd`.`ALMACEN` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ALMACEN_DETALLE_PRODUCTO10`
    FOREIGN KEY (`PRODUCTO_ID`)
    REFERENCES `almacenbd`.`PRODUCTO` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`CAT_PERMISO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`CAT_PERMISO` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`CAT_PERMISO` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `MENU` VARCHAR(45) NOT NULL,
  `URL_MENU` VARCHAR(45) NOT NULL,
  `ID_MENU` VARCHAR(45) NULL,
  `SUBMENU` VARCHAR(45) NOT NULL,
  `URL_SUBMENU` VARCHAR(45) NOT NULL,
  `ICONO` VARCHAR(45) NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `almacenbd`.`CAT_ROL_PERMISO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `almacenbd`.`CAT_ROL_PERMISO` ;

CREATE TABLE IF NOT EXISTS `almacenbd`.`CAT_ROL_PERMISO` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `DESCRIPCION` VARCHAR(45) NULL,
  `CAT_PERMISO_ID` INT(11) NOT NULL,
  `CAT_ROL_ID` INT(11) NOT NULL,
  `STATUS_FLAG` INT(2) NOT NULL,
  `START_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_UPDATE_USER` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_CAT_ROL_PERMISO_CAT_PERMISO1_idx` (`CAT_PERMISO_ID` ASC),
  INDEX `fk_CAT_ROL_PERMISO_CAT_ROL1_idx` (`CAT_ROL_ID` ASC),
  CONSTRAINT `fk_CAT_ROL_PERMISO_CAT_PERMISO1`
    FOREIGN KEY (`CAT_PERMISO_ID`)
    REFERENCES `almacenbd`.`CAT_PERMISO` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CAT_ROL_PERMISO_CAT_ROL1`
    FOREIGN KEY (`CAT_ROL_ID`)
    REFERENCES `almacenbd`.`CAT_ROL` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
